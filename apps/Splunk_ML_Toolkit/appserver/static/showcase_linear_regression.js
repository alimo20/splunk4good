webpackJsonp([17],[function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/app/Splunk_ML_Toolkit/")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__(513),__webpack_require__("splunkjs/mvc/checkboxview"),__webpack_require__("splunkjs/mvc/dropdownview"),__webpack_require__("splunkjs/mvc/radiogroupview"),__webpack_require__("splunkjs/mvc/singleview"),__webpack_require__("splunkjs/mvc/tableview"),__webpack_require__("splunkjs/mvc/utils"),__webpack_require__("splunkjs/mvc/visualizationregistry"),__webpack_require__(646),__webpack_require__(623),__webpack_require__(620),__webpack_require__(624),__webpack_require__(625),__webpack_require__(670),__webpack_require__(621),__webpack_require__(547),__webpack_require__(509),__webpack_require__(596),__webpack_require__(535),__webpack_require__(545),__webpack_require__(628),__webpack_require__(643),__webpack_require__(541),__webpack_require__(629),__webpack_require__(631),__webpack_require__("models/Base")],__WEBPACK_AMD_DEFINE_RESULT__=function(_jquery,_underscoreMltk,_checkboxview,_dropdownview,_radiogroupview,_singleview,_tableview,_utils,_visualizationregistry,_AlgorithmParamsGroup,_Footer,_Master,_DrilldownLinker,_SearchStringDisplay,_Slider,_Spinners,_compactTemplateString,_Options,_NumberValidator,_ExperimentModel,_Fit,_EnhancedMultiDropdownView,_EnhancedTextInputView,_Forms,_Searches,_BaseAssistantView,_Base){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _jquery2=_interopRequireDefault(_jquery),_underscoreMltk2=_interopRequireDefault(_underscoreMltk),_checkboxview2=_interopRequireDefault(_checkboxview),_dropdownview2=_interopRequireDefault(_dropdownview),_radiogroupview2=_interopRequireDefault(_radiogroupview),_singleview2=_interopRequireDefault(_singleview),_tableview2=_interopRequireDefault(_tableview),_utils2=_interopRequireDefault(_utils),_AlgorithmParamsGroup2=_interopRequireDefault(_AlgorithmParamsGroup),_Footer2=_interopRequireDefault(_Footer),_Master2=_interopRequireDefault(_Master),DrilldownLinker=_interopRequireWildcard(_DrilldownLinker),_Slider2=_interopRequireDefault(_Slider),Spinners=_interopRequireWildcard(_Spinners),_compactTemplateString2=_interopRequireDefault(_compactTemplateString),_Options2=_interopRequireDefault(_Options),NumberValidator=_interopRequireWildcard(_NumberValidator),_ExperimentModel2=_interopRequireDefault(_ExperimentModel),_Fit2=_interopRequireDefault(_Fit),_EnhancedMultiDropdownView2=_interopRequireDefault(_EnhancedMultiDropdownView),_EnhancedTextInputView2=_interopRequireDefault(_EnhancedTextInputView),Forms=_interopRequireWildcard(_Forms),Searches=_interopRequireWildcard(_Searches),_BaseAssistantView2=_interopRequireDefault(_BaseAssistantView),_Base2=_interopRequireDefault(_Base),_templateObject=_taggedTemplateLiteral(["","\n                                                  | eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'\n                                                  | search ","=",""],["","\n                                                  | eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'\n                                                  | search ","=",""]),_templateObject2=_taggedTemplateLiteral(["","\n                                                  | eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'\n                                                  | search ",'="*"'],["","\n                                                  | eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'\n                                                  | search ",'="*"']),_templateObject3=_taggedTemplateLiteral(["","\n                                          | search $regressionTargetToken|s$="," $regressionPredictionToken|s$=",""],["","\n                                          | search $regressionTargetToken|s$="," $regressionPredictionToken|s$=",""]),_templateObject4=_taggedTemplateLiteral(["| loadjob $","$\n                                   | head 1\n                                   | transpose\n                                   | fields column"],["| loadjob $","$\n                                   | head 1\n                                   | transpose\n                                   | fields column"]),_templateObject5=_taggedTemplateLiteral(['| loadjob $variableSearchJobIdToken$\n                                   | search column != "column" AND column != "_*"'],['| loadjob $variableSearchJobIdToken$\n                                   | search column != "column" AND column != "_*"']),_templateObject6=_taggedTemplateLiteral(['| loadjob $variableSearchJobIdToken$\n                                   | search column != "column" AND column != $regressionTargetToken|s$ AND (column != "_*" OR column = "_time")'],['| loadjob $variableSearchJobIdToken$\n                                   | search column != "column" AND column != $regressionTargetToken|s$ AND (column != "_*" OR column = "_time")']),_templateObject7=_taggedTemplateLiteral(["| loadjob $searchBarSearchJobIdToken$\n                                   | sample partitions=100"],["| loadjob $searchBarSearchJobIdToken$\n                                   | sample partitions=100"]),_templateObject8=_taggedTemplateLiteral(["| loadjob $dataPartitionJobIdToken$\n                                   | search partition_number < $trainingSetFractionToken$\n                                   | fields - partition_number\n                                   $preprocessTrainingSPLToken$\n                                   ",""],["| loadjob $dataPartitionJobIdToken$\n                                   | search partition_number < $trainingSetFractionToken$\n                                   | fields - partition_number\n                                   $preprocessTrainingSPLToken$\n                                   ",""]),_templateObject9=_taggedTemplateLiteral(["| loadjob $dataPartitionJobIdToken$\n                                   | search partition_number >= $testSetFractionToken$\n                                   | fields - partition_number\n                                   $preprocessTestingSPLToken$"],["| loadjob $dataPartitionJobIdToken$\n                                   | search partition_number >= $testSetFractionToken$\n                                   | fields - partition_number\n                                   $preprocessTestingSPLToken$"]),_templateObject10=_taggedTemplateLiteral(["| loadjob $testingJobIdToken$ ",""],["| loadjob $testingJobIdToken$ ",""]),algoParamsWrapperId="regressionAlgorithmParamsControlsWrapper",LinearRegressionView=_BaseAssistantView2.default.extend({headerOptions:{title:"Predict Numeric Fields",description:"Predict the value of a numeric field using a weighted combination of the values of other fields in that event."},supportsScheduleButton:!0,submitButtonText:"Fit Model",searchBarTooltip:"The events returned should have at least one numeric field and one other field.",historyStatisticsFields:["rSquared","RMSE"],renderPanels:function(){function getPreprocessingFitArray(){return self.assistantFormView.preprocessPanel.buildFitSPLArray(Forms.getToken("modelNameToken"))}function getFitCommentsArray(){var fitSPLArray=self.assistantFormView.preprocessPanel.buildFitSPLArray(Forms.getToken("modelNameToken")),commentsArray=new Array(fitSPLArray.length);commentsArray.length>0&&(commentsArray[0]="apply preprocessing steps");var fitComment=void 0;return fitComment=self.model.experiment.isNew()?commentsArray.concat("fit and save a model using the entire dataset and provided parameters"):commentsArray.concat("fit and save a draft model using the entire dataset and provided parameters, a draft model will be updated to production model when you save")}function getApplyArray(){var applySPLArray=self.assistantFormView.preprocessPanel.buildApplySPLArray(Forms.getToken("modelNameToken"));return applySPLArray.concat("| apply $modelNameToken|s$")}function getApplyCommentsArray(){var applySPLArray=self.assistantFormView.preprocessPanel.buildApplySPLArray(Forms.getToken("modelNameToken")),commentsArray=new Array(applySPLArray.length);return commentsArray.length>0&&(commentsArray[0]="apply preprocessing models"),commentsArray.concat('apply the model to the entire dataset to predict "'+Forms.getToken("regressionTargetToken")+'"')}function startPostProcessingSearches(){Searches.startSearch("dataAndPredictionsTableSearch"),Searches.startSearch("actualVsPredictedScatterPlotSearch"),Searches.startSearch("actualVsPredictedAndResidualSearch"),Searches.startSearch("residualsHistogramPlotSearch"),Searches.startSearch("regressionstatisticsSearch"),Searches.startSearch(Forms.getToken("decisionTreeSummaryVizToken")?"decisionTreeSummaryVizSearch":"fitModelSummaryTableSearch")}function submitForm(){!self.model.state.get("footerDisabled")&&self.controlValidity.getAll()&&(self.hideErrorMessage(),self.hideResults(),Forms.setToken("preprocessTrainingSPLToken",getPreprocessingFitArray().join("")),Forms.setToken("preprocessTestingSPLToken",Forms.parseTemplate(getApplyArray().join(""))),null==actualVsPredictedLinesPanel.sortByControl.val()?actualVsPredictedLinesPanel.sortByControl.val(Forms.getChoiceViewChoices(actualVsPredictedLinesPanel.sortByControl)[0]):actualVsPredictedLinesPanel.sortByControl.trigger("change"),self.setPreprocessingStages(),Searches.getSearchManager("dataPartitionSearch").startSearch())}function updateForm(newIsRunningValue,message){if(null!=newIsRunningValue&&(isRunning=newIsRunningValue),self.controls.regressionAlgorithmControl.settings.set("disabled",isRunning),self.controls.targetVariableControl.settings.set("disabled",isRunning),self.controls.featureVariablesControl.settings.set("disabled",isRunning),self.controls.trainingSetFractionSlider.setDisabled(isRunning),null!=self.controls.modelNameInputControl&&self.controls.modelNameInputControl.settings.set("disabled",isRunning),self.controls.regressionAlgorithmParamsControls.setDisabled(isRunning),self.assistantFormView.preprocessPanel.setDisabled(isRunning),isRunning)self.model.state.set({footerDisabled:isRunning,submitButtonText:message}),submitted&&self.model.state.trigger("submitStarted");else{var regressionTargetToken=Forms.getToken("regressionTargetToken"),regressionFeaturesToken=Forms.getToken("regressionFeaturesToken"),fieldsValid=null!=regressionTargetToken&&regressionTargetToken.length>0&&null!=regressionFeaturesToken&&regressionFeaturesToken.length>0;self.model.state.set({footerDisabled:!fieldsValid,submitButtonText:submitButtonText}),fieldsValid&&submitted&&(submitSuccess&&(self.model.experimentSubmitPristine.setFromSplunkD(self.model.experiment.toSplunkD()),self.model.state.trigger("submitSuccess"),submitSuccess=!1),submitted=!1)}}function updateRegressionAlgorithmParamsControls(){var controlIds=self.regressionAlgorithmParamsList[Forms.getToken("regressionAlgorithmToken")];null!=controlIds&&(self.controlValidity.clear(_underscoreMltk2.default.map(self.controls.regressionAlgorithmParamsControls.controls,function(control){return control.control.id})),self.controls.regressionAlgorithmParamsControls.activate(controlIds))}function updateRegressionAlgorithmParamsToken(){self.model.experiment.getMainSearchStageModel().algorithmParams.resetParams(self.controls.regressionAlgorithmParamsControls.serialize(!0)),Forms.setToken("regressionAlgorithmParamsToken",self.controls.regressionAlgorithmParamsControls.serialize().join(" "))}function updateSummaryVisualizationType(){Forms.getToken("decisionTreeSummaryVizToken")?(decisionTreeVizPanel.show(),fitModelSummaryPanel.hide()):(decisionTreeVizPanel.hide(),fitModelSummaryPanel.show())}var self=this;_BaseAssistantView2.default.prototype.renderPanels.call(this);var _utils$getPageInfo=_utils2.default.getPageInfo(),appName=_utils$getPageInfo.app,defaultModelName=_Options2.default.getOptionByName("defaultModelName"),defaultVizHeight=_Options2.default.getOptionByName("defaultVizHeight"),isRunning=!1,submitted=!1,submitSuccess=!1;this.regressionAlgorithmParamsList={LinearRegression:["fit_intercept"],RandomForestRegressor:["n_estimators","max_depth","max_features","min_samples_split","max_leaf_nodes"],Lasso:["alpha"],KernelRidge:["gamma"],ElasticNet:["fit_intercept","normalize","alpha","l1_ratio"],Ridge:["fit_intercept","normalize","alpha"],DecisionTreeRegressor:["max_depth","max_features","min_samples_split","max_leaf_nodes","splitter"]};var submitButtonText="Fit Model";self.assistantFormView.preprocessPanel.render().$el.appendTo(self.assistantFormView.preprocessWrapper),this.controls.regressionAlgorithmParamsControls=new _AlgorithmParamsGroup2.default(self.$el.find("#"+algoParamsWrapperId)),this.controls.regressionAlgorithmControl=function(){var control=new _dropdownview2.default({id:"regressionAlgorithmControl",el:self.$el.find("#regressionAlgorithmControl"),showClearButton:!1,choices:Object.keys(self.regressionAlgorithmParamsList).map(function(algorithm){return{value:algorithm}})}).on("change",function(){var value=control.val();self.model.experiment.getMainSearchStageModel().set("algorithm",value),Forms.setToken("regressionAlgorithmToken",value),Forms["DecisionTreeRegressor"===value?"setToken":"unsetToken"]("decisionTreeSummaryVizToken",!0),updateSummaryVisualizationType(),updateRegressionAlgorithmParamsControls(),updateRegressionAlgorithmParamsToken()}).render();return control.$el.prev("label").tooltip({title:"Select an algorithm to use for predicting field values."}),control}(),this.controls.featureVariablesControl=function(){var control=new _EnhancedMultiDropdownView2.default({id:"featureVariablesControl",managerid:"featuresVariableSearch",el:self.$el.find("#featureVariablesControl"),labelField:"column",valueField:"column",width:400,allowCustomValues:!0});return control.$el.prev("label").tooltip({title:"Select the field(s) to use for predicting the value of the selected numeric field."}),control.on("change",function(){var values=control.val();self.model.experiment.getMainSearchStageModel().featureVariables.resetFields(values),Forms.setToken("rawRegressionFeaturesToken",values),null!=values&&values.length>0?Forms.setToken("regressionFeaturesToken",values.map(Forms.escape).join(" ")):Forms.unsetToken("regressionFeaturesToken"),updateForm()}),control.render(),control}(),this.controls.targetVariableControl=function(){var control=new _dropdownview2.default({id:"targetVariableControl",managerid:"targetVariableSearch",el:self.$el.find("#targetVariableControl"),labelField:"column",valueField:"column",showClearButton:!1});return control.$el.prev("label").tooltip({title:"Select a numeric field to predict. Note: a field containing numbers may not be numeric (e.g., port number). As a rule of thumb, if summing the field is meaningful, it is likely numeric."}),control.on("change",function(){Forms.unsetToken(["regressionFeaturesToken","regressionTargetToken","regressionPredictionToken"]),Forms.clearChoiceView(self.controls.featureVariablesControl);var targetVariable=control.val();self.model.experiment.getMainSearchStageModel().set("targetVariable",targetVariable),null!=targetVariable&&targetVariable.length>0&&(Forms.setToken("regressionTargetToken",targetVariable),Forms.setToken("regressionPredictionToken","predicted("+targetVariable+")")),updateForm()}),control.render(),control}(),this.controls.trainingSetFractionSlider=function(){function updateTrainingSetFractionSlider(trainingFraction){var testFraction=100-trainingFraction,sliderText="",tooltipText="";testFraction>0?(sliderText=trainingFraction+" / "+testFraction,tooltipText="Select the percentage of the events to use for training and for testing, respectively."):(sliderText="no split",tooltipText="100% of the data will be used for training. Note: the test statistics reflect how well the model predicts the training data."),sliderValue$El.text(sliderText),slider$El.prev("label").tooltip("destroy").tooltip({title:tooltipText})}function updateFractionTokens(trainingFraction){Forms.setToken("trainingSetFractionToken",trainingFraction),Forms.setToken("testSetFractionToken",100===trainingFraction?0:trainingFraction)}var slider$El=self.$el.find("#trainingSetFractionSlider"),sliderValue$El=self.$el.find("#trainingSetFractionSliderValue"),modelAttribute="trainingFraction",sliderModel=new _Base2.default(_defineProperty({},modelAttribute,self.model.experiment.getMainSearchStageModel().get(modelAttribute))),slider=new _Slider2.default({model:sliderModel,modelAttribute:modelAttribute,min:10,max:100,step:10,width:220}).render();return slider.model.on("change:"+modelAttribute,function(model,value){self.model.experiment.getMainSearchStageModel().set(modelAttribute,value),updateTrainingSetFractionSlider(value),updateFractionTokens(value)}),slider$El.append(slider.el),updateTrainingSetFractionSlider(slider.model.get(modelAttribute)),updateFractionTokens(slider.model.get(modelAttribute)),slider}(),function(){self.controls.regressionAlgorithmParamsControls.addControl("n_estimators",new _EnhancedTextInputView2.default({id:"n_estimatorsControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"number",message:"Value must be a positive integer.",allowFloats:!1,min:1}}).render(),"N Estimators","The number of trees in the forest. Defaults to 10."),self.controls.regressionAlgorithmParamsControls.addControl("max_depth",new _EnhancedTextInputView2.default({id:"max_depthControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"number",message:"Value must be a positive integer.",allowFloats:!1,min:1}}).render(),"Max Depth",'The maximum depth of the tree. If unset, then nodes are expanded until all leaves are pure or until all leaves contain fewer samples than specified by "Min Samples Split". Ignored if "Max Leaf Nodes" is set.'),self.controls.regressionAlgorithmParamsControls.addControl("max_features",new _EnhancedTextInputView2.default({id:"max_featuresControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"custom",message:'Value must be a positive number or one of "auto", "sqrt", or "log2"',validate:function(value){return["auto","sqrt","log2"].indexOf(value)>=0||NumberValidator.validate(value,{allowFloats:!0,min:0,minExclusive:!0})}}}).render(),"Max Features",{html:!0,title:'<div style="text-align: left">\n                        The number of features to consider at each split.\n                        <br>\n                        This field supports one of several value types:\n                        <ul>\n                            <li>integer: consider this many features at each split</li>\n                            <li>float: consider the total number of features multiplied by this value</li>\n                            <li>"sqrt": consider the square root of the total number of features</li>\n                            <li>"log2": consider the base-2 logarithm of the total number of features</li>\n                        </ul>\n                        If unset, consider all features at each split\n                    </div>'}),self.controls.regressionAlgorithmParamsControls.addControl("min_samples_split",new _EnhancedTextInputView2.default({id:"min_samples_splitControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"number",message:"Value must be a positive integer.",allowFloats:!1,min:1}}).render(),"Min Samples Split","The minimum number of samples required to split an internal node. Defaults to 2."),self.controls.regressionAlgorithmParamsControls.addControl("alpha",new _EnhancedTextInputView2.default({id:"alphaControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"number",message:"Value must be a positive number or zero.",allowFloats:!0,min:0}}).render(),"Alpha","Constant that multiplies the L1 term. Defaults to 1.0."),self.controls.regressionAlgorithmParamsControls.addControl("gamma",new _EnhancedTextInputView2.default({id:"gammaControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"number",message:"Value must be a positive number or zero.",allowFloats:!0,min:0}}).render(),"Gamma","Controls the width of the radial basis function kernel. Defaults to 1/number of fields."),self.controls.regressionAlgorithmParamsControls.addControl("fit_intercept",new _checkboxview2.default({id:"fit_interceptControl",el:(0,_jquery2.default)("<div>"),default:!0}).render(),"Fit Intercept","Whether or not the model should include an implicit intercept term.",{checkboxText:"estimate the intercept"}),self.controls.regressionAlgorithmParamsControls.addControl("normalize",new _checkboxview2.default({id:"normalizeControl",el:(0,_jquery2.default)("<div>"),default:!1}).render(),"Normalize",'Whether or not to normalize the values of the fields in "Fields to use for predicting".',{checkboxText:"normalize before regression"}),self.controls.regressionAlgorithmParamsControls.addControl("l1_ratio",new _EnhancedTextInputView2.default({id:"l1_ratioControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"number",message:"Value must be a positive number between 0 and 1.",allowFloats:!0,min:0,max:1}}).render(),"L1 Ratio","The ElasticNet mixing parameter. For l1_ratio = 0 the penalty is an L2 penalty. For l1_ratio = 1 it is an L1 penalty. For 0 < l1_ratio < 1, the penalty is a combination of L1 and L2. Defaults to 0.5."),self.controls.regressionAlgorithmParamsControls.addControl("max_leaf_nodes",new _EnhancedTextInputView2.default({id:"max_leaf_nodesControl",el:(0,_jquery2.default)("<div>"),default:"",optional:!0,validator:{type:"number",message:"Value must be an integer greater than 1.",allowFloats:!1,min:2}}).render(),"Max Leaf Nodes",'Grow the tree in best-first fashion until it has this many leaf nodes. Best nodes are defined as relative reduction in impurity. If unset, allows an unlimited number of leaf nodes. "Max Depth" is ignored if this is set.'),self.controls.regressionAlgorithmParamsControls.addControl("splitter",new _radiogroupview2.default({id:"splitterControl",el:(0,_jquery2.default)("<div>"),default:"best",choices:[{value:"best"},{value:"random"}]}).render(),"Splitter","The strategy used to choose the split at each node. Supported strategies are “best” to choose the best split and “random” to choose the best random split."),_underscoreMltk2.default.each(self.controls.regressionAlgorithmParamsControls.controls,function(controlAttributes,id){self.listenTo(controlAttributes.control,"change",function(value,control){null!=control.options.validator&&self.controlValidity.set(control.id,control.getValidity()),updateRegressionAlgorithmParamsToken()})})}(),this.model.experiment.isNew()&&(this.controls.modelNameInputControl=function(){var control=new _EnhancedTextInputView2.default({id:"modelNameInputControl",el:self.$el.find("#modelNameInputControl"),validator:{type:"modelName"},changeOnKeyup:!0,optional:!0}).render();return control.$el.prev("label").tooltip({title:"Enter a name for the model so you can refer to it later. You might include information like the name of the dataset, the field you are predicting, or the algorithm being used."}),control.on("change",function(){var rawModelName=control.val(),isValid=!control.settings.get("invalid");self.controlValidity.set(control.id,isValid);var modelName=null==rawModelName||0===rawModelName.length?defaultModelName:rawModelName;self.model.experiment.getMainSearchStageModel().set("modelName",modelName),Forms.setToken("modelNameToken",modelName)}),control._viz.on("keyup",function(event){13===event.keyCode&&submitForm()}),control}());var dataAndPredictionsPanel=function(){return new _Master2.default({el:self.$el.find("#dataAndPredictionsPanel"),title:"Prediction Results",viz:_tableview2.default,vizOptions:{id:"dataAndPredictionsTable",managerid:"dataAndPredictionsTableSearch",drilldown:"none"}})}(),actualVsPredictedLinesPanel=function(){var _vizOptions,vizName="LinesViz",LinesViz=(0,_visualizationregistry.getVisualizer)(appName,vizName),vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+"."+vizName}),assistantPanel=new _Master2.default({el:self.$el.find("#actualVsPredictedLinesPanel"),title:"Actual vs. Predicted Line Chart",tooltip:"Compare the values predicted by the model to the true values. Better models produce more similar lines.",viz:LinesViz,vizOptions:(_vizOptions={id:"actualPredictedLinesViz",height:defaultVizHeight-40,managerid:"actualVsPredictedLinesPlotSearch"},_defineProperty(_vizOptions,appName+"."+vizName+".onClick",function(series,point){var seriesName=Forms.escape(series.label),pointValue=Forms.escape(null!=point.originalY?point.originalY:point.y),searchInfo=self.getSearchInfo(),applySPL=[searchInfo.searchString].concat(getApplyArray()).join(""),searchString=applySPL+" | search "+seriesName+"="+pointValue,search=DrilldownLinker.createSearch(searchString,searchInfo.timeRange);window.open(DrilldownLinker.getUrl("search",search,vizOptions),"_blank")}),_defineProperty(_vizOptions,appName+"."+vizName+".onLegendItemClick",function(series){var seriesName=Forms.escape(series.label),searchInfo=self.getSearchInfo(),applySPL=[searchInfo.searchString].concat(getApplyArray()).join(""),searchString=applySPL+" | search "+seriesName+'="*"',search=DrilldownLinker.createSearch(searchString,searchInfo.timeRange);window.open(DrilldownLinker.getUrl("search",search,vizOptions),"_blank")}),_vizOptions)}),sortByControl$El=(0,_jquery2.default)("<div>");assistantPanel.sortByWrapper=(0,_jquery2.default)("<div>").attr("id","actualVsPredictedLinesSortBy").append((0,_jquery2.default)("<label>").text("Sort by:"),sortByControl$El),assistantPanel.sortByWrapper.insertAfter(assistantPanel.header);var choices=[{label:"Default Sort",value:""},{label:"Actual Value",value:"$regressionTargetToken|s$"},{label:"Predicted Value",value:"$regressionPredictionToken|s$"}];return assistantPanel.sortByControl=new _dropdownview2.default({id:"actualVsPredictedLinesSortByControl",el:sortByControl$El,showClearButton:!1,labelField:"column",valueField:"column",choices:choices}),assistantPanel.sortByControl.on("change",function(){var sortBy=assistantPanel.sortByControl.val();null!=sortBy&&sortBy.length>0?(Forms.setToken("actualVsPredictedSortByEvalToken",Forms.parseTemplate(" | eval _sortBy = "+sortBy)),Forms.setToken("actualVsPredictedSortByToken",Forms.parseTemplate(" | sort 0 "+sortBy))):(Forms.setToken("actualVsPredictedSortByEvalToken",""),Forms.setToken("actualVsPredictedSortByToken","")),Searches.getSearchManager("actualVsPredictedAndResidualSearch").startSearch()}).render(),assistantPanel}(),residualsLinePanel=function(){var _vizOptions2,vizName="LinesViz",LinesViz=(0,_visualizationregistry.getVisualizer)(appName,vizName),vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+"."+vizName});return new _Master2.default({el:self.$el.find("#residualsLinePanel"),title:"Residuals Line Chart",tooltip:"Residuals are the difference between the predicted values and the true values (prediction error). Better models produce smaller residuals.",viz:LinesViz,vizOptions:(_vizOptions2={id:"residualsLineViz",height:defaultVizHeight,managerid:"residualsLinePlotSearch"},_defineProperty(_vizOptions2,appName+"."+vizName+".onClick",function(series,point){var seriesName=Forms.escape(series.label),pointValue=Forms.escape(null!=point.originalY?point.originalY:point.y),searchInfo=self.getSearchInfo(),applySPL=[searchInfo.searchString].concat(getApplyArray()).join(""),searchString=(0,_compactTemplateString2.default)(_templateObject,applySPL,seriesName,pointValue),search=DrilldownLinker.createSearch(searchString,searchInfo.timeRange);window.open(DrilldownLinker.getUrl("search",search,vizOptions),"_blank")}),_defineProperty(_vizOptions2,appName+"."+vizName+".onLegendItemClick",function(series){var seriesName=Forms.escape(series.label),searchInfo=self.getSearchInfo(),applySPL=[searchInfo.searchString].concat(getApplyArray()).join(""),searchString=(0,_compactTemplateString2.default)(_templateObject2,applySPL,seriesName),search=DrilldownLinker.createSearch(searchString,searchInfo.timeRange);window.open(DrilldownLinker.getUrl("search",search,vizOptions),"_blank")}),_vizOptions2)})}(),actualVsPredictedScatterLinePanel=function(){var vizName="ScatterLineViz",ScatterLineViz=(0,_visualizationregistry.getVisualizer)(appName,vizName);return new _Master2.default({el:self.$el.find("#actualVsPredictedScatterLinePanel"),title:"Actual vs. Predicted Scatter Chart",tooltip:"Compare the values predicted by the model to the true values. Better models produce dots closer to the diagonal line.",viz:ScatterLineViz,vizOptions:_defineProperty({id:"actualVsPredictedScatterLineViz",height:defaultVizHeight,managerid:"actualVsPredictedScatterPlotSearch"},appName+"."+vizName+".onClick",function(pointData){var actualValue=Forms.escape(null!=pointData.originalX?pointData.originalX:pointData.x),predictedValue=Forms.escape(null!=pointData.originalX?pointData.originalY:pointData.y),searchInfo=self.getSearchInfo(),applySPL=[searchInfo.searchString].concat(getApplyArray()).join(""),searchString=(0,_compactTemplateString2.default)(_templateObject3,applySPL,actualValue,predictedValue),search=DrilldownLinker.createSearch(searchString,searchInfo.timeRange),searchUrl=DrilldownLinker.getUrl("search",search);window.open(searchUrl,"_blank")})})}(),residualsHistogramPanel=function(){var vizName="HistogramViz",HistogramViz=(0,_visualizationregistry.getVisualizer)(appName,vizName);return new _Master2.default({el:self.$el.find("#residualsHistogramPanel"),title:"Residuals Histogram",tooltip:"Residuals are the difference between the predicted values and the true values (prediction error). Better models produce residuals closer to the vertical line.",viz:HistogramViz,vizOptions:_defineProperty({id:"residualsHistogramViz",height:defaultVizHeight,managerid:"residualsHistogramPlotSearch"},appName+"."+vizName+".linePosition",0)})}(),regressionStatisticsPanel=function(){var footer=new _Footer2.default(self.$el.find("#regressionStatisticsPanel"));return footer.spinnerAnchor=footer.footer.parent(".mlts-panel"),
footer}(),r2StatisticPanel=function(){return new _Master2.default({el:self.$el.find("#r2StatisticPanel"),title:"R<sup>2</sup> Statistic",tooltip:{html:!0,title:"The square of the correlation coefficient between the predicted and actual values. Better models have an R<sup>2</sup> closer to 1."},viz:_singleview2.default,vizOptions:{id:"r2StatisticViz",managerid:"regressionstatisticsSearch",field:"rSquared",numberPrecision:"0.0000",height:30},footerButtons:!1})}(),rootMeanSquaredErrorStatisticPanel=function(){return new _Master2.default({el:self.$el.find("#rootMeanSquaredErrorStatisticPanel"),title:"Root Mean Squared Error (RMSE)",tooltip:"The quadratic mean of the prediction errors (residuals). Better models have a smaller RMSE.",viz:_singleview2.default,vizOptions:{id:"rootMeanSquaredErrorStatisticViz",managerid:"regressionstatisticsSearch",field:"RMSE",numberPrecision:"0.00",height:30},footerButtons:!1})}(),fitModelSummaryPanel=function(){return new _Master2.default({el:self.$el.find("#fitModelSummaryPanel"),title:"Fit Model Parameters Summary",tooltip:'The coefficients and intercept learned via linear regression. Note that a large coefficient does not imply that a field is "important".',viz:_tableview2.default,vizOptions:{id:"fitModelSummaryTable",managerid:"fitModelSummaryTableSearch",pageSize:5}})}(),decisionTreeVizPanel=function(){return new _Master2.default({el:self.$el.find("#decisionTreeVizPanel"),title:"Decision Tree",tooltip:'The coefficients and intercept learned via linear regression. Note that a large coefficient does not imply that a field is "important".',viz:_tableview2.default,vizOptions:{id:"decisionTreeSummaryViz",managerid:"decisionTreeSummaryVizSearch",pageSize:10}})}();return this.listenTo(self.assistantFormView.preprocessPanel,"stepChanged",function(){Forms.clearChoiceView(self.controls.targetVariableControl,!0)}),this.listenTo(this.assistantFormView.preprocessPanel.preprocessCollection,"change:state",function(){updateForm(this.assistantFormView.preprocessPanel.isPreprocessingRunning(),"Preprocessing...")}),this.listenTo(this.model.state,"submit",function(){submitForm()}),this.assistantFormView.searchBarControl.events.on("change",function(){Forms.clearChoiceView(self.controls.targetVariableControl,!0),Forms.clearChoiceView(self.controls.featureVariablesControl,!0),Forms.unsetToken("classificationTargetToken","classificationFeaturesToken","classificationPredictionToken"),updateForm(),Searches.startSearch("searchBarSearch")}),function(){var searchBarSearch=Searches.getSearchManager("searchBarSearch");searchBarSearch.on("onStartCallback",function(){self.hideErrorMessage(),self.hideResults()}),searchBarSearch.on("onErrorCallback",function(errorMessage){Forms.clearChoiceViewOptions(self.controls.targetVariableControl),self.showErrorMessage(errorMessage),self.hideResults()})}(),function(){Searches.setSearch("variableSearch",{targetJobIdTokenName:"variableSearchJobIdToken",searchString:(0,_compactTemplateString2.default)(_templateObject4,self.assistantFormView.preprocessSearchJobIdTokenName),onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){Searches.setSearch("targetVariableSearch",{searchString:(0,_compactTemplateString2.default)(_templateObject5),onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){Searches.setSearch("featuresVariableSearch",{searchString:(0,_compactTemplateString2.default)(_templateObject6),onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){Searches.setSearch("dataPartitionSearch",{targetJobIdTokenName:"dataPartitionJobIdToken",autostart:!1,searchString:(0,_compactTemplateString2.default)(_templateObject7),onStartCallback:function(){self.hideErrorMessage(),submitted=!0,updateForm(!0,"Fitting Model...")},onDoneCallback:function(){Searches.getSearchManager("trainingSearch").startSearch()},onErrorCallback:function(errorMessage){updateForm(!1),self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){var sharedSearchString="| fit $regressionAlgorithmToken$ $regressionAlgorithmParamsToken$ $regressionTargetToken|s$ from $regressionFeaturesToken$ into $modelNameToken|s$";self.listenTo(self.model.state,"openInSearch",function(){var searchInfo=self.getSearchInfo(),search=DrilldownLinker.createSearch([searchInfo.searchString].concat(getPreprocessingFitArray(),[sharedSearchString]),searchInfo.timeRange);window.open(DrilldownLinker.getUrl("search",search),"_blank")}),self.listenTo(self.model.state,"showSPL",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("trainingSearchStringDisplayModal","Fit a model on all your data in search",[searchInfo.searchString].concat(getPreprocessingFitArray(),[sharedSearchString]),[null].concat(getFitCommentsArray()),searchInfo.timeRange)}),Searches.setSearch("trainingSearch",{targetJobIdTokenName:"trainingJobIdToken",autostart:!1,searchString:(0,_compactTemplateString2.default)(_templateObject8,sharedSearchString),onStartCallback:function(searchManager){self.hideErrorMessage()},onDoneCallback:function(){Searches.getSearchManager("testingSearch").startSearch()},onErrorCallback:function(errorMessage){updateForm(!1),self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){Searches.setSearch("testingSearch",{targetJobIdTokenName:"testingJobIdToken",autostart:!1,searchString:(0,_compactTemplateString2.default)(_templateObject9),onDoneCallback:function(){self.accumulateExperimentHistory(Searches.getSid(this)),self.showResults(),startPostProcessingSearches(),submitSuccess=!0},onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()},onFinallyCallback:function(){updateForm(!1)}})}(),function(){var roundingSearchString="| eval $regressionPredictionToken$ = round('$regressionPredictionToken$', 2)",sharedSearchArray=["| eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'","| table $regressionTargetToken|s$, $regressionPredictionToken|s$, residual, $regressionFeaturesToken$"],vizQueryArray=[],vizQuerySearch=null;dataAndPredictionsPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch),"_blank")}),dataAndPredictionsPanel.showSPLButton.on("click",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("dataAndPredictionsTableSearchStringDisplayModal",'Display the actual and predicted values of the "field to predict"',vizQueryArray,[null].concat(getApplyCommentsArray(),[null,"calculate the prediction error"]),searchInfo.timeRange)}),Searches.setSearch("dataAndPredictionsTableSearch",{targetJobIdTokenName:"dataAndPredictionsTableToken",autostart:!1,searchString:["| loadjob $testingJobIdToken$"].concat(roundingSearchString,sharedSearchArray),onStartCallback:function(){var searchInfo=self.getSearchInfo(),baseSearchStringArray=[searchInfo.searchString].concat(getApplyArray());vizQueryArray=baseSearchStringArray.concat(roundingSearchString,sharedSearchArray),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(dataAndPredictionsPanel.title,vizQuerySearch)}})}(),function(){var sharedSearchArray=["| table $regressionTargetToken|s$ $regressionPredictionToken|s$"],vizQueryArray=[],vizQuerySearch=null,vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+".ScatterLineViz"});actualVsPredictedScatterLinePanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch,vizOptions),"_blank")}),actualVsPredictedScatterLinePanel.showSPLButton.on("click",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("actualVsPredictedScatterSearchStringDisplayModal","Plot actual vs. predicted values on a scatter chart",vizQueryArray,[null].concat(getApplyCommentsArray()),searchInfo.timeRange,vizOptions)}),Searches.setSearch("actualVsPredictedScatterPlotSearch",{searchString:["| loadjob $testingJobIdToken$"].concat(sharedSearchArray),autostart:!1,onStartCallback:function(){var searchInfo=self.getSearchInfo();Spinners.showLoadingOverlay(actualVsPredictedScatterLinePanel.viz.$el),vizQueryArray=[searchInfo.searchString].concat(getApplyArray(),sharedSearchArray),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(actualVsPredictedScatterLinePanel.title,vizQuerySearch,vizOptions)},onFinallyCallback:function(){Spinners.hideLoadingOverlay(actualVsPredictedScatterLinePanel.viz.$el)}})}(),function(){var sharedSearchArray=["| eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'","| table _time, $regressionTargetToken|s$, $regressionPredictionToken|s$, residual","$actualVsPredictedSortByToken$"];Searches.setSearch("actualVsPredictedAndResidualSearch",{searchString:["| loadjob $testingJobIdToken$"].concat(sharedSearchArray),autostart:!1,targetJobIdTokenName:"actualVsPredictedAndResidualToken",onStartCallback:function(){Spinners.showLoadingOverlay([actualVsPredictedLinesPanel.viz.$el,residualsLinePanel.viz.$el])},onDoneCallback:function(){Searches.getSearchManager("actualVsPredictedLinesPlotSearch").startSearch(),Searches.getSearchManager("residualsLinePlotSearch").startSearch()},onErrorCallback:function(){Spinners.hideLoadingOverlay([actualVsPredictedLinesPanel.viz.$el,residualsLinePanel.viz.$el])}})}(),function(){var vizQueryArray=[],vizQuerySearch=null,vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+".LinesViz"});actualVsPredictedLinesPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch,vizOptions),"_blank")}),actualVsPredictedLinesPanel.showSPLButton.on("click",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("actualVsPredictedLinesSearchStringDisplayModal","Plot actual vs. predicted values on a line chart",vizQueryArray,[null].concat(getApplyCommentsArray(),["select the fields to plot"]),searchInfo.timeRange,vizOptions)}),Searches.setSearch("actualVsPredictedLinesPlotSearch",{searchString:["| loadjob $actualVsPredictedAndResidualToken$","$actualVsPredictedSortByEvalToken$","| table _time, $regressionTargetToken|s$, $regressionPredictionToken|s$, _sortBy"],autostart:!1,onStartCallback:function(){var searchInfo=self.getSearchInfo();vizQueryArray=[searchInfo.searchString].concat(getApplyArray(),["| table _time, $regressionTargetToken|s$, $regressionPredictionToken|s$"]),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(actualVsPredictedLinesPanel.title,vizQuerySearch,vizOptions)},onFinallyCallback:function(){Spinners.hideLoadingOverlay(actualVsPredictedLinesPanel.viz.$el)}})}(),function(){var sharedSearchArray=["| table _time, residual"],vizQueryArray=[],vizQuerySearch=null,vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+".LinesViz"});residualsLinePanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch,vizOptions),"_blank")}),residualsLinePanel.showSPLButton.on("click",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("residualsLineSearchStringDisplayModal","Plot prediction errors on a line chart",vizQueryArray,[null].concat(getApplyCommentsArray(),["calculate the prediction error"]),searchInfo.timeRange,vizOptions)}),Searches.setSearch("residualsLinePlotSearch",{searchString:["| loadjob $actualVsPredictedAndResidualToken$"].concat(sharedSearchArray),autostart:!1,onStartCallback:function(){var searchInfo=self.getSearchInfo();vizQueryArray=[searchInfo.searchString].concat(getApplyArray(),["| eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'"],sharedSearchArray),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(residualsLinePanel.title,vizQuerySearch,vizOptions)},onFinallyCallback:function(){Spinners.hideLoadingOverlay(residualsLinePanel.viz.$el)}})}(),function(){var sharedSearchArray=["| eval residual = '$regressionTargetToken$' - '$regressionPredictionToken$'","| `histogram(residual, 100)`",'| rename count as "Sample Count", residual as "Residual Error"'],vizQueryArray=[],vizQuerySearch=null,vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+".HistogramViz"});residualsHistogramPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch,vizOptions),"_blank")}),residualsHistogramPanel.showSPLButton.on("click",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("residualsHistogramPlotSearchStringDisplayModal","Plot prediction errors on a histogram chart",vizQueryArray,[null].concat(getApplyCommentsArray(),["calculate the prediction error","use the `histogram` macro to format the prediction error"]),searchInfo.timeRange,vizOptions)}),Searches.setSearch("residualsHistogramPlotSearch",{searchString:["| loadjob $testingJobIdToken$"].concat(sharedSearchArray),autostart:!1,onStartCallback:function(){var searchInfo=self.getSearchInfo();Spinners.showLoadingOverlay(residualsHistogramPanel.viz.$el),vizQueryArray=[searchInfo.searchString].concat(getApplyArray(),sharedSearchArray),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(residualsHistogramPanel.title,vizQuerySearch,vizOptions)},onFinallyCallback:function(){Spinners.hideLoadingOverlay(residualsHistogramPanel.viz.$el)}})}(),function(){var sharedSearchArray=["| summary $modelNameToken|s$","| table feature *"],vizQuerySearch=null;fitModelSummaryPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch),"_blank")}),fitModelSummaryPanel.showSPLButton.on("click",function(){(0,_SearchStringDisplay.showSearchStringModal)("fitModelSummaryTableSearchStringDisplayModal","Inspect the model coefficients",sharedSearchArray,["load the model coefficients"])}),Searches.setSearch("fitModelSummaryTableSearch",{searchString:sharedSearchArray,autostart:!1,onStartCallback:function(searchManager){var searchInfo=self.getSearchInfo();vizQuerySearch=DrilldownLinker.createSearch(sharedSearchArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(fitModelSummaryPanel.title,vizQuerySearch)}})}(),function(){var sharedSearchArray=["| summary $modelNameToken|s$"],vizQuerySearch=null;decisionTreeVizPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch),"_blank")}),decisionTreeVizPanel.showSPLButton.on("click",function(){(0,_SearchStringDisplay.showSearchStringModal)("decisionTreeSummaryVizSearchStringDisplayModal","Inspect the model coefficients",sharedSearchArray,["load the model coefficients"])}),Searches.setSearch("decisionTreeSummaryVizSearch",{searchString:sharedSearchArray,autostart:!1,onStartCallback:function(searchManager){var searchInfo=self.getSearchInfo();vizQuerySearch=DrilldownLinker.createSearch(sharedSearchArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(decisionTreeVizPanel.title,vizQuerySearch)}})}(),function(){var sharedSearchString="| `regressionstatistics($regressionTargetToken|s$, $regressionPredictionToken|s$)`",vizQueryArray=[],vizQuerySearch=null;regressionStatisticsPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch),"_blank")}),regressionStatisticsPanel.showSPLButton.on("click",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("regressionstatisticsSearchStringDisplayModal","Compute R² and root mean squared error (RMSE)",vizQueryArray,[null].concat(getApplyCommentsArray(),["use the `regressionstatistics` macro to compute R² and RMSE"]),searchInfo.timeRange)}),Searches.setSearch("regressionstatisticsSearch",{searchString:(0,_compactTemplateString2.default)(_templateObject10,sharedSearchString),autostart:!1,onStartCallback:function(){var searchInfo=self.getSearchInfo();Spinners.showLoadingOverlay(regressionStatisticsPanel.spinnerAnchor),vizQueryArray=[searchInfo.searchString].concat(getApplyArray(),[sharedSearchString]),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(r2StatisticPanel.title,vizQuerySearch),DrilldownLinker.setSearchDrilldown(rootMeanSquaredErrorStatisticPanel.title,vizQuerySearch)},onDataCallback:function(data){self.accumulateExperimentStatistics(Searches.getSid("testingSearch"),data)},onFinallyCallback:function(){Spinners.hideLoadingOverlay(regressionStatisticsPanel.spinnerAnchor)}})}(),setTimeout(updateForm,0),this},loadExperiment:function(runExperiment){var _this=this;this.stopListening(Searches.getSearchManager("searchBarSearch"),"onDoneCallback"),this.stopListening(this.controls.targetVariableControl,"datachange"),this.stopListening(this.controls.featureVariablesControl,"datachange");var searchInfo=this.getSearchInfo();this.listenToOnce(Searches.getSearchManager("searchBarSearch"),"onDoneCallback",function(){_this.assistantFormView.preprocessPanel.loadExperiment(_this.model.experiment)}),this.assistantFormView.searchBarControl.setSearchInfo(searchInfo);var mainSearchStage=this.model.experiment.getMainSearchStageModel();if(null!=mainSearchStage){var algorithm=mainSearchStage.getAlgorithm(),targetVariable=mainSearchStage.get("targetVariable"),featureVariables=mainSearchStage.featureVariables.getFieldsArray(),algorithmParams=mainSearchStage.algorithmParams.toJSON(),modelName=mainSearchStage.get("modelName"),trainingFraction=mainSearchStage.get("trainingFraction");this.controls.regressionAlgorithmControl.val(algorithm),this.controls.trainingSetFractionSlider.model.set("trainingFraction",trainingFraction),this.listenTo(this.controls.targetVariableControl,"datachange",_underscoreMltk2.default.partial(function(targetVar){_this.assistantFormView.preprocessPanel.isPreprocessingComplete()&&(_this.stopListening(_this.controls.targetVariableControl,"datachange"),Forms.setChoiceViewValueIfValid(_this.controls.targetVariableControl,targetVar))},targetVariable)),this.listenToOnce(this.controls.featureVariablesControl,"datachange",_underscoreMltk2.default.partial(function(featureVars,runExp){Forms.setChoiceViewValueIfValid(_this.controls.featureVariablesControl,featureVars,!0),runExp&&_this.model.state.trigger("submit")},featureVariables,runExperiment));var controlIds=this.regressionAlgorithmParamsList[algorithm];null!=controlIds&&this.controls.regressionAlgorithmParamsControls.load(algorithmParams,controlIds),null!=modelName&&null!=this.controls.modelNameInputControl&&this.controls.modelNameInputControl.val(modelName)}},setDefaultMainStage:function(){var mainSearchStage=this.model.experiment.getMainSearchStageModel();if(null==mainSearchStage&&(mainSearchStage=new _Fit2.default({algorithm:"LinearRegression"}),this.model.experiment.addSearchStages(mainSearchStage)),null==mainSearchStage.get("trainingFraction")&&mainSearchStage.set("trainingFraction",50),null==mainSearchStage.get("modelName"))if(this.model.experiment.isNew())mainSearchStage.set("modelName",_Options2.default.getOptionByName("defaultModelName"));else{var experiementModelName=this.model.experiment.getExperimentModelName();mainSearchStage.set("modelName",experiementModelName)}var modelName=mainSearchStage.get("modelName");Forms.setToken("modelNameToken",this.model.experiment.isNew()?mainSearchStage.get("modelName"):_ExperimentModel2.default.getDraftModelNameFromProd(modelName))},controlsTemplate:'\n        <div class="mlts-input">\n            <label>Algorithm</label>\n            <div id="regressionAlgorithmControl"></div>\n        </div>\n        <div class="mlts-input">\n            <label>Field to predict</label>\n            <div id="targetVariableControl"></div>\n        </div>\n        <div class="mlts-input">\n            <label>Fields to use for predicting</label>\n            <div id="featureVariablesControl"></div>\n        </div>\n        <div class="mlts-input">\n          <label>Split for training / test: <span id="trainingSetFractionSliderValue"></span></label>\n          <div id="trainingSetFractionSlider">\n          </div>\n        </div>\n        <div id="'+algoParamsWrapperId+'"></div>\n        <% if (isNotExperiment) { %>\n        <div class="mlts-input">\n          <label>Save the model as</label>\n          <div id="modelNameInputControl"></div>\n        </div>\n        <% } %>\n    ',template:'\n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="dataAndPredictionsPanel"></div>\n            </div>\n        </div>\n\n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                 <div class="mlts-panel" id="actualVsPredictedLinesPanel">\n                 </div>\n            </div>\n            <div class="mlts-cell">\n                 <div class="mlts-panel" id="actualVsPredictedScatterLinePanel">\n                 </div>\n            </div>\n        </div>\n\n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                 <div class="mlts-panel" id="residualsLinePanel">\n                 </div>\n            </div>\n            <div class="mlts-cell">\n                 <div class="mlts-panel" id="residualsHistogramPanel">\n                 </div>\n            </div>\n        </div>\n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="regressionStatisticsPanel">\n                    <div class="mlts-stats-panel">\n                        <div id="r2StatisticPanel"></div>\n                        <div id="rootMeanSquaredErrorStatisticPanel"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="mlts-cell">\n                 <div class="mlts-panel" id="fitModelSummaryPanel">\n                 </div>\n            </div>\n            <div class="mlts-cell">\n                 <div class="mlts-panel" id="decisionTreeVizPanel">\n                 </div>\n            </div>\n        </div>\n\n        '});new LinearRegressionView}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}]);