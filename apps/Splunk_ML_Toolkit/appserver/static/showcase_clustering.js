webpackJsonp([15],{0:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;__webpack_require__.p=function(){function make_url(){for(var seg,len,output="",i=0,l=arguments.length;i<l;i++)seg=arguments[i].toString(),len=seg.length,len>1&&"/"==seg.charAt(len-1)&&(seg=seg.substring(0,len-1)),output+="/"!=seg.charAt(0)?"/"+seg:seg;if("/"!=output){var segments=output.split("/"),firstseg=segments[1];if("static"==firstseg||"modules"==firstseg){var postfix=output.substring(firstseg.length+2,output.length);output="/"+firstseg,window.$C.BUILD_NUMBER&&(output+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(output+="."+window.$C.BUILD_PUSH_NUMBER),"app"==segments[2]&&(output+=":"+getConfigValue("APP_BUILD",0)),output+="/"+postfix}}var root=getConfigValue("MRSPARKLE_ROOT_PATH","/"),djangoRoot=getConfigValue("DJANGO_ROOT_PATH",""),locale=getConfigValue("LOCALE","en-US"),combinedPath="";return combinedPath=djangoRoot&&output.substring(0,djangoRoot.length)===djangoRoot?output.replace(djangoRoot,djangoRoot+"/"+locale.toLowerCase()):"/"+locale+output,""==root||"/"==root?combinedPath:root+combinedPath}function getConfigValue(key,defaultValue){if(window.$C&&window.$C.hasOwnProperty(key))return window.$C[key];if(void 0!==defaultValue)return defaultValue;throw new Error("getConfigValue - "+key+" not set, no default provided")}return make_url("/static/app/Splunk_ML_Toolkit/")+"/"}(),__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__("shim/jquery"),__webpack_require__(513),__webpack_require__("splunkjs/mvc/dropdownview"),__webpack_require__("splunkjs/mvc/simpleform/input/submit"),__webpack_require__("splunkjs/mvc/utils"),__webpack_require__("splunkjs/mvc/visualizationregistry"),__webpack_require__(646),__webpack_require__(620),__webpack_require__(624),__webpack_require__(625),__webpack_require__(547),__webpack_require__(509),__webpack_require__(535),__webpack_require__(545),__webpack_require__(628),__webpack_require__(643),__webpack_require__(541),__webpack_require__(629),__webpack_require__(631)],__WEBPACK_AMD_DEFINE_RESULT__=function(_jquery,_underscoreMltk,_dropdownview,_submit,_utils,_visualizationregistry,_AlgorithmParamsGroup,_Master,_DrilldownLinker,_SearchStringDisplay,_compactTemplateString,_Options,_ExperimentModel,_Fit,_EnhancedMultiDropdownView,_EnhancedTextInputView,_Forms,_Searches,_BaseAssistantView){"use strict";function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _taggedTemplateLiteral(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var _jquery2=_interopRequireDefault(_jquery),_underscoreMltk2=_interopRequireDefault(_underscoreMltk),_dropdownview2=_interopRequireDefault(_dropdownview),_submit2=_interopRequireDefault(_submit),_utils2=_interopRequireDefault(_utils),_AlgorithmParamsGroup2=_interopRequireDefault(_AlgorithmParamsGroup),_Master2=_interopRequireDefault(_Master),DrilldownLinker=_interopRequireWildcard(_DrilldownLinker),_compactTemplateString2=_interopRequireDefault(_compactTemplateString),_Options2=_interopRequireDefault(_Options),_ExperimentModel2=_interopRequireDefault(_ExperimentModel),_Fit2=_interopRequireDefault(_Fit),_EnhancedMultiDropdownView2=_interopRequireDefault(_EnhancedMultiDropdownView),_EnhancedTextInputView2=_interopRequireDefault(_EnhancedTextInputView),Forms=_interopRequireWildcard(_Forms),Searches=_interopRequireWildcard(_Searches),_BaseAssistantView2=_interopRequireDefault(_BaseAssistantView),_templateObject=_taggedTemplateLiteral(["| loadjob $",'$\n                                       | head 1\n                                       | transpose\n                                       | fields column\n                                       | search column != "column" AND column != "_*"'],["| loadjob $",'$\n                                       | head 1\n                                       | transpose\n                                       | fields column\n                                       | search column != "column" AND column != "_*"']),ClusteringView=_BaseAssistantView2.default.extend({headerOptions:{title:"Cluster Numeric Events",description:"Partition events with multiple numeric fields into clusters."},supportsScheduleButton:!0,submitButtonText:"Cluster",searchBarTooltip:"The events returned should contain at least two numeric fields.",historyStatisticsFields:[],activateSaveTooltip:"To activate Save, successfully cluster.",renderPanels:function(){function updateForm(newIsRunningValue,message){if(null!=newIsRunningValue&&(isRunning=newIsRunningValue),self.controls.algorithmControl.settings.set("disabled",isRunning),self.controls.clusterVariableControl.settings.set("disabled",isRunning),self.controls.algorithmParamsControls.setDisabled(isRunning),canSaveModel()&&null!=self.controls.modelNameInputControl&&self.controls.modelNameInputControl.settings.set("disabled",isRunning),clusteringPanel.visualizeVariableControl.settings.set("disabled",isRunning),self.assistantFormView.preprocessPanel.setDisabled(isRunning),isRunning)self.model.state.set({footerDisabled:isRunning,submitButtonText:message}),submitted&&self.model.state.trigger("submitStarted");else{var clusterVariablesToken=Forms.getToken("clusterVariablesToken"),fieldsValid=null!=clusterVariablesToken&&clusterVariablesToken.length>0;self.model.state.set({footerDisabled:!fieldsValid,submitButtonText:self.submitButtonText}),fieldsValid&&submitted&&(submitSuccess&&(self.model.experimentSubmitPristine.setFromSplunkD(self.model.experiment.toSplunkD()),self.model.state.trigger("submitSuccess"),submitSuccess=!1),submitted=!1)}}function canSaveModel(){var algorithmSettings=self.clusteringAlgorithmSettings[self.controls.algorithmControl.val()];return null!=algorithmSettings&&algorithmSettings.savesModel}function getClusteringFitArray(){var fitSPLArray=self.assistantFormView.preprocessPanel.buildFitSPLArray(Forms.getToken("modelNameToken"));return fitSPLArray.concat(clusteringFitSPL)}function getClusteringFitCommentsArray(){var fitSPLArray=self.assistantFormView.preprocessPanel.buildFitSPLArray(Forms.getToken("modelNameToken")),commentsArray=new Array(fitSPLArray.length);commentsArray.length>0&&(commentsArray[0]="apply preprocessing steps");var saveModelComment=self.model.experiment.isNew()?"and save into a model":"and save into a draft model, a draft model will be updated to production model when you save";return commentsArray.concat("cluster the selected variables "+(canSaveModel()?saveModelComment:""))}function getClusteringApplyArray(){var applySPLArray=self.assistantFormView.preprocessPanel.buildApplySPLArray(Forms.getToken("modelNameToken"));return applySPLArray.concat("| apply $modelNameToken|s$")}function getClusteringApplyCommentsArray(){var applySPLArray=self.assistantFormView.preprocessPanel.buildApplySPLArray(Forms.getToken("modelNameToken")),commentsArray=new Array(applySPLArray.length);return commentsArray.length>0&&(commentsArray[0]="apply preprocessing models"),commentsArray.concat("apply the clustering model")}function updateAlgorithmParamsToken(){self.model.experiment.getMainSearchStageModel().algorithmParams.resetParams(self.controls.algorithmParamsControls.serialize(!0)),Forms.setToken("algorithmParamsToken",self.controls.algorithmParamsControls.serialize().join(" "))}var self=this;_BaseAssistantView2.default.prototype.renderPanels.call(this);var _utils$getPageInfo=_utils2.default.getPageInfo(),appName=_utils$getPageInfo.app,defaultModelName=_Options2.default.getOptionByName("defaultModelName"),clusteringFitSPL="| fit $algorithmToken$ $algorithmParamsToken$ $clusterVariablesToken$ $modelFitToken$",isRunning=!1,submitted=!1,submitSuccess=!1;this.clusteringAlgorithmSettings={KMeans:{savesModel:!0,params:["k"]},DBSCAN:{savesModel:!1,params:["eps"]},Birch:{savesModel:!0,params:["k"]},SpectralClustering:{savesModel:!1,params:["k"]}};var clusteringPanel$El=this.$el.find("#clusteringPanel"),vizOptions=DrilldownLinker.parseVizOptions({category:"custom",type:appName+".ScatterplotMatrixViz"});this.assistantFormView.preprocessPanel.render().$el.appendTo(self.assistantFormView.preprocessWrapper);var clusteringPanel=function(){var ClusteringViz=(0,_visualizationregistry.getVisualizer)(appName,"ScatterplotMatrixViz"),panel=new _Master2.default({el:clusteringPanel$El,title:"Cluster Visualization",viz:ClusteringViz,tooltip:"The events, colored by cluster.",vizOptions:{id:"clusteringViz",managerid:"visualizeSearch"}});return panel.viz.$el.on("hasNonNumericDataEvent",function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}),panel.visualizeVariableControl=function(){var visualizeVariableControl=new _EnhancedMultiDropdownView2.default({id:"visualizeVariableControl",managerid:"variableSearch",el:(0,_jquery2.default)("<div>"),labelField:"column",valueField:"column",width:960});return visualizeVariableControl.on("change",function(values){panel.visualizeSubmitControl.settings.set("formReady",values.length>0)}),visualizeVariableControl.render(),visualizeVariableControl}(),panel.visualizeSubmitControl=function(){var visualizeSubmitControl=new _submit2.default({id:"visualizeSubmitControl",el:(0,_jquery2.default)("<div>"),text:"Visualize"});return visualizeSubmitControl.on("submit",function(){var visualizeVariableString=panel.visualizeVariableControl.val().map(Forms.escape).join(", ");Forms.setToken("visualizeVariableToken",'| eval cluster= "Cluster: " + cluster | table cluster, '+visualizeVariableString+" "),Searches.startSearch("visualizeSearch")}),visualizeSubmitControl.$el.find("button").removeClass("btn-primary").addClass("btn-default"),visualizeSubmitControl.settings.set("formReady",!1),visualizeSubmitControl.render(),visualizeSubmitControl}(),panel.fieldsWrapper=(0,_jquery2.default)("<div>").addClass("mlts-visualize-picker"),panel.fieldsWrapper.insertAfter(panel.header).append(panel.visualizeVariableControl.$el,panel.visualizeSubmitControl.$el),panel}();return this.controls.algorithmParamsControls=new _AlgorithmParamsGroup2.default(self.$el.find("#algorithmParamsControlsWrapper")),function(){self.controls.algorithmParamsControls.addControl("k",new _EnhancedTextInputView2.default({id:"kControl",el:(0,_jquery2.default)("<div>"),default:2,validator:{type:"number",message:"Value must be a positive integer.",allowFloats:!1,min:1}}).render(),"K (# of centroids)","Specify the number of clusters."),self.controls.algorithmParamsControls.addControl("eps",new _EnhancedTextInputView2.default({id:"epsControl",el:(0,_jquery2.default)("<div>"),default:.2,validator:{type:"number",message:"Value must be a positive number.",min:0,minExclusive:!0}}).render(),"eps (radius of neighborhood)","Specify the number of clusters."),_underscoreMltk2.default.each(self.controls.algorithmParamsControls.controls,function(controlAttributes,id){self.listenTo(controlAttributes.control,"change",function(value,control){null!=control.options.validator&&self.controlValidity.set(control.id,control.getValidity()),updateAlgorithmParamsToken()})})}(),this.controls.algorithmControl=function(){var control=new _dropdownview2.default({id:"algorithmControl",el:self.$el.find("#algorithmControl"),showClearButton:!1,choices:[{label:"K-means",value:"KMeans"},{label:"DBSCAN",value:"DBSCAN"},{label:"Birch",value:"Birch"},{label:"Spectral Clustering",value:"SpectralClustering"}]});return control.$el.prev("label").tooltip({title:"Select the algorithm to use for clustering."}),control.on("change",function(){var algorithm=this.val();if(self.model.experiment.getMainSearchStageModel().set("algorithm",algorithm),Forms.setToken("algorithmToken",algorithm),!self.model.experiment.isNew()){var mainSearchStage=self.model.experiment.getMainSearchStageModel();mainSearchStage.set("modelName",canSaveModel()?self.model.experiment.getExperimentModelName():void 0);var modelName=mainSearchStage.get("modelName");Forms.setToken("modelNameToken",null!=modelName?_ExperimentModel2.default.getDraftModelNameFromProd(modelName):"")}Forms.setToken("modelFitToken",canSaveModel()?'into "'+Forms.getToken("modelNameToken")+'"':""),self.controlValidity.clear(_underscoreMltk2.default.map(self.controls.algorithmParamsControls.controls,function(paramControl){return paramControl.control.id}));var algorithmSettings=self.clusteringAlgorithmSettings[algorithm];null!=algorithmSettings&&self.controls.algorithmParamsControls.activate(algorithmSettings.params),updateAlgorithmParamsToken()}),control.render(),control}(),this.controls.clusterVariableControl=function(){var control=new _EnhancedMultiDropdownView2.default({id:"clusterVariableControl",managerid:"variableSearch",el:self.$el.find("#clusterVariableControl"),labelField:"column",valueField:"column",width:400,allowCustomValues:!0});return control.$el.prev("label").tooltip({title:"Events will be clustered based on the values of these fields."}),control.on("change",function(){var values=control.val();self.model.experiment.getMainSearchStageModel().featureVariables.resetFields(values),null!=values&&values.length>0?Forms.setToken("clusterVariablesToken",control.val().map(Forms.escape).join(" ")):Forms.unsetToken("clusterVariablesToken"),updateForm()}),control.render(),control}(),this.model.experiment.isNew()&&(this.controls.modelNameInputControl=function(){function updateModelName(){if(canSaveModel()){var rawModelName=control.val(),isValid=control.getValidity();self.controlValidity.set(control.id,isValid);var _modelName=null==rawModelName||0===rawModelName.length?defaultModelName:rawModelName;self.model.experiment.getMainSearchStageModel().set("modelName",_modelName),Forms.setToken("modelNameToken",_modelName),control.$el.tooltip("destroy"),control.settings.set("disabled",!1)}else self.controlValidity.clear(control.id),self.model.experiment.getMainSearchStageModel().set("modelName",void 0),Forms.setToken("modelNameToken",""),control.$el.tooltip({title:"This algorithm doesn't save models."}),control.settings.set("disabled",!0);var modelName=Forms.getToken("modelNameToken");self.model.experiment.getMainSearchStageModel().set("modelName",modelName.length>0?modelName:void 0),Forms.setToken("modelFitToken",modelName.length>0?'into "'+modelName+'"':"")}var control=new _EnhancedTextInputView2.default({id:"modelNameInputControl",el:self.$el.find("#modelNameInputControl"),validator:{type:"modelName"},changeOnKeyup:!0,optional:!0}).render();return control.$el.prev("label").tooltip({title:"Enter a name for the learned cluster model."}),control.on("change",updateModelName),self.controls.algorithmControl.on("change",function(){return control.trigger("change")}),control._viz.on("keyup",function(event){13===event.keyCode&&self.model.state.trigger("submit")}),control}()),this.assistantFormView.searchBarControl.events.on("change",function(){Forms.clearChoiceView(self.controls.clusterVariableControl,!0),Forms.clearChoiceView(clusteringPanel.visualizeVariableControl,!0),Forms.unsetToken("clusterVariablesToken","visualizeVariableToken"),updateForm(),Searches.cancelSearch("clusteringSearch"),Searches.startSearch("searchBarSearch")}),this.listenTo(this.model.state,"submit",function(){!self.model.state.get("footerDisabled")&&self.controlValidity.getAll()&&(self.hideErrorMessage(),self.hideResults(),Forms.setToken("preprocessFitSPLToken",self.assistantFormView.preprocessPanel.buildFitSPLArray(Forms.getToken("modelNameToken")).join("")),self.setPreprocessingStages(),Searches.startSearch("clusteringSearch"))}),this.listenTo(self.assistantFormView.preprocessPanel,"stepChanged",function(){Forms.clearChoiceView(self.controls.clusterVariableControl,!0)}),this.listenTo(this.assistantFormView.preprocessPanel.preprocessCollection,"change:state",function(){updateForm(this.assistantFormView.preprocessPanel.isPreprocessingRunning(),"Preprocessing...")}),function(){var searchBarSearch=Searches.getSearchManager("searchBarSearch");searchBarSearch.on("onStartCallback",function(){self.hideErrorMessage(),self.hideResults()}),searchBarSearch.on("onErrorCallback",function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()})}(),function(){self.listenTo(self.model.state,"openInSearch",function(){var searchInfo=self.getSearchInfo(),search=DrilldownLinker.createSearch([searchInfo.searchString].concat(getClusteringFitArray()),searchInfo.timeRange);window.open(DrilldownLinker.getUrl("search",search),"_blank")}),self.listenTo(self.model.state,"showSPL",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("clusterTrainingSearchStringDisplayModal","Fit a clustering model on all your data in search",[searchInfo.searchString].concat(getClusteringFitArray()),[null].concat(getClusteringFitCommentsArray()),searchInfo.timeRange)}),Searches.setSearch("clusteringSearch",{autostart:!1,targetJobIdTokenName:"clusteringSearchJobIdToken",searchString:"| loadjob $searchBarSearchJobIdToken$ $preprocessFitSPLToken$ "+clusteringFitSPL,onStartCallback:function(){self.hideResults(),self.hideErrorMessage(),submitted=!0,updateForm(!0,"Clustering...")},onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()},onDoneCallback:function(){self.accumulateExperimentHistory(Searches.getSid(this)),self.showResults(),clusteringPanel.visualizeVariableControl.val(self.controls.clusterVariableControl.val()),clusteringPanel.visualizeSubmitControl.trigger("submit"),submitSuccess=!0},onFinallyCallback:function(){updateForm(!1)}})}(),function(){Searches.setSearch("variableSearch",{searchString:(0,_compactTemplateString2.default)(_templateObject,self.assistantFormView.preprocessSearchJobIdTokenName),onStartCallback:function(){self.hideErrorMessage()},onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage),self.hideResults()}})}(),function(){var vizQueryArray=[],vizQuerySearch=null;clusteringPanel.openInSearchButton.on("click",function(){window.open(DrilldownLinker.getUrl("search",vizQuerySearch,vizOptions),"_blank")}),clusteringPanel.showSPLButton.on("click",function(){var searchInfo=self.getSearchInfo();(0,_SearchStringDisplay.showSearchStringModal)("clusteringSearchStringDisplayModal","Display the cluster in search",vizQueryArray,[null].concat(canSaveModel()?getClusteringApplyCommentsArray():getClusteringFitCommentsArray(),"display the selected variables"),searchInfo.timeRange,vizOptions)}),Searches.setSearch("visualizeSearch",{autostart:!1,searchString:"| loadjob $clusteringSearchJobIdToken$ $visualizeVariableToken$",onStartCallback:function(){self.hideErrorMessage();var clusteringSPLArray=canSaveModel()?getClusteringApplyArray():getClusteringFitArray(),searchInfo=self.getSearchInfo();vizQueryArray=[searchInfo.searchString].concat(clusteringSPLArray,Forms.getToken("visualizeVariableToken")),vizQuerySearch=DrilldownLinker.createSearch(vizQueryArray,searchInfo.timeRange),DrilldownLinker.setSearchDrilldown(clusteringPanel.title,vizQuerySearch,vizOptions)},onErrorCallback:function(errorMessage){self.showErrorMessage(errorMessage)}})}(),setTimeout(updateForm,0),this},loadExperiment:function(runExperiment){var _this=this;this.stopListening(Searches.getSearchManager("searchBarSearch"),"onDoneCallback"),this.stopListening(this.controls.clusterVariableControl,"datachange");var searchInfo=this.getSearchInfo();this.listenToOnce(Searches.getSearchManager("searchBarSearch"),"onDoneCallback",function(){_this.assistantFormView.preprocessPanel.loadExperiment(_this.model.experiment)}),this.assistantFormView.searchBarControl.setSearchInfo(searchInfo);var mainSearchStage=this.model.experiment.getMainSearchStageModel();if(null!=mainSearchStage){var algorithm=mainSearchStage.getAlgorithm(),featureVariables=mainSearchStage.featureVariables.getFieldsArray(),algorithmParams=mainSearchStage.algorithmParams.toJSON(),modelName=mainSearchStage.get("modelName");this.controls.algorithmControl.val(algorithm),this.listenTo(this.controls.clusterVariableControl,"datachange",_underscoreMltk2.default.partial(function(featureVars,runExp){_this.assistantFormView.preprocessPanel.isPreprocessingComplete()&&(_this.stopListening(_this.controls.clusterVariableControl,"datachange"),Forms.setChoiceViewValueIfValid(_this.controls.clusterVariableControl,featureVars),runExp&&_this.model.state.trigger("submit"))},featureVariables,runExperiment));var algorithmSettings=this.clusteringAlgorithmSettings[algorithm];null!=algorithmSettings&&null!=algorithmSettings.params&&this.controls.algorithmParamsControls.load(algorithmParams,algorithmSettings.params),null!=modelName&&null!=this.controls.modelNameInputControl&&this.controls.modelNameInputControl.val(modelName)}},setDefaultMainStage:function(){var mainSearchStage=this.model.experiment.getMainSearchStageModel();if(null==mainSearchStage&&(mainSearchStage=new _Fit2.default({algorithm:"KMeans"}),this.model.experiment.addSearchStages(mainSearchStage)),null==mainSearchStage.get("modelName"))if(this.model.experiment.isNew())mainSearchStage.set("modelName",_Options2.default.getOptionByName("defaultModelName"));else{var experiementModelName=this.model.experiment.getExperimentModelName();mainSearchStage.set("modelName",experiementModelName)}var modelName=mainSearchStage.get("modelName");null!=modelName?Forms.setToken("modelNameToken",this.model.experiment.isNew()?mainSearchStage.get("modelName"):_ExperimentModel2.default.getDraftModelNameFromProd(modelName)):Forms.setToken("modelNameToken","")},controlsTemplate:'\n        <div class="mlts-input">\n            <label>Algorithm</label>\n            <div id="algorithmControl"></div>\n        </div>\n        <div class="mlts-input">\n            <label>Fields to use for clustering</label>\n            <div id="clusterVariableControl"></div>\n        </div>\n        <span id="algorithmParamsControlsWrapper"></span>\n        <% if (isNotExperiment) { %>\n        <div class="mlts-input">\n            <label>Save the model as</label>\n            <div id="modelNameInputControl"></div>\n        </div>\n        <% } %>\n     ',template:'\n        <div class="mlts-row mlts-results-row">\n            <div class="mlts-cell">\n                <div class="mlts-panel" id="clusteringPanel"></div>\n            </div>\n        </div>\n    '});new ClusteringView}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},"splunkjs/mvc/simpleform/input/submit":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require){var _=__webpack_require__("require/underscore"),$=__webpack_require__("shim/jquery"),BaseSplunkView=__webpack_require__("splunkjs/mvc/basesplunkview"),Dashboard=__webpack_require__("splunkjs/mvc/simplexml/controller"),FormUtils=__webpack_require__("splunkjs/mvc/simpleform/formutils"),SubmitButton=BaseSplunkView.extend({className:"splunk-submit-button form-submit",options:{text:_("Submit").t(),useIcon:!1},events:{"click button":function(e){e.preventDefault(),this.$("button").is(".disabled")||this.trigger("submit",this)},"click .delete-input":function(e){e.preventDefault(),Dashboard.model.view.updateFormSettings({submitButton:!1}).done(_.bind(this.remove,this))}},initialize:function(){this.configure(),this.listenTo(this.settings,"change",this.render),this.listenTo(Dashboard.getStateModel(),"change:edit",this.onEditModeChange);var settings=this.settings;settings.set("formReady",FormUtils.isFormReady()),_.defer(function(){FormUtils.onFormReady().then(function(){settings.set("formReady",!0)})}),this.listenTo(settings,"change",this.render)},onEditModeChange:function(){if(this.$(".edit-dropdown").remove(),Dashboard.isEditMode()){var el=$('<div class="edit-dropdown"><a href="#" class="delete-input"><i class="icon-x"/></a></div>');el.find(".delete-input").attr("title",_("Delete submit button").t()),el.prependTo(this.el)}},render:function(){var button=this.$("button");return button.length||(button=$('<button class="btn btn-primary"></button>').appendTo(this.el)),this.settings.get("useIcon")?button.html('<i class="icon-search"></i>'):this.settings.has("text")?button.text(this.settings.get("text")):this.settings.set("text",button.text()),button[this.settings.get("formReady")?"removeClass":"addClass"]("disabled"),this.onEditModeChange(),this}});return SubmitButton}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}});